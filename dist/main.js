(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const t=new Uint8Array(16);function n(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(t)}const s=[];for(let m=0;m<256;++m)s.push((m+256).toString(16).slice(1));console.log(function(o,t,r){if(e.randomUUID&&!t&&!o)return e.randomUUID();const c=(o=o||{}).random||(o.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=c[e];return t}return function(e,o=0){return(s[e[o+0]]+s[e[o+1]]+s[e[o+2]]+s[e[o+3]]+"-"+s[e[o+4]]+s[e[o+5]]+"-"+s[e[o+6]]+s[e[o+7]]+"-"+s[e[o+8]]+s[e[o+9]]+"-"+s[e[o+10]]+s[e[o+11]]+s[e[o+12]]+s[e[o+13]]+s[e[o+14]]+s[e[o+15]]).toLowerCase()}(c)}());const r=document.getElementById("uploadArea"),c=document.getElementById("fileInput");var i="",l={};function a(e){const o={};return e.forEach((e=>{o[e]="empty"})),o}function d(e){for(const o of e)"text/csv"===o.type||o.name.endsWith(".csv")?p(o):console.log("Not a CSV file:",o.name)}function p(e){const o=new FileReader;o.onload=function(e){const o=e.target.result,t=o.split("\n")[0].split(",").filter((e=>""!==e.trim()));console.log("CSV Header:",t),console.log("Number of Columns:",t.length),l=a(t),i=o},o.readAsText(e)}r.addEventListener("click",(()=>c.click())),r.addEventListener("dragover",(e=>{e.preventDefault(),r.classList.add("dragging")})),r.addEventListener("dragleave",(()=>{r.classList.remove("dragging")})),r.addEventListener("drop",(e=>{e.preventDefault(),r.classList.remove("dragging"),d(e.dataTransfer.files)})),c.addEventListener("change",(e=>{d(e.target.files)}));const g=document.getElementById("start");let u;function f(e,o){if("speechSynthesis"in window&&u){const t=new SpeechSynthesisUtterance(e);t.voice=u,t.onend=()=>{o&&o()},window.speechSynthesis.speak(t)}else console.log("Text-to-Speech is not supported in this browser.")}if("speechSynthesis"in window?window.speechSynthesis.onvoiceschanged=()=>{const e=window.speechSynthesis.getVoices();u=e.find((e=>"en-US"===e.lang||"en-GB"===e.lang))}:console.log("Text-to-Speech is not supported in this browser."),"SpeechRecognition"in window||"webkitSpeechRecognition"in window){const y=new(window.SpeechRecognition||window.webkitSpeechRecognition);var h=0,w=!1;function S(e){if(e.length>0){for(const[o,t]of Object.entries(l))if("empty"===t){l[o]=e;break}Object.values(l).includes("empty")||(y.stop(),w=!0,f(`New record created. ${Object.entries(l).map((([e,o])=>`${e}: ${o}`)).join(", ")}`,(()=>{w=!1,y.start(),h=1})),function(e){const o=e.join(",")+"\n";""!==i&&(i+=o,console.log("Updated CSV Content:"),console.log(i))}(Object.values(l)))}}y.lang="en-US",y.continuous=!1,y.onstart=()=>{console.log("Speech recognition started. Speak now."),g.disabled=!0},y.onresult=e=>{const o=e.results[0][0].transcript;return console.log(`Recognized: ${o}`),o.toLowerCase().includes("alexa")&&(console.log("alexa"),console.log("Alexa detected! Performing an action..."),h=1,y.stop(),w=!0,f("Select mode from create, edit or delete.",(()=>{w=!1,y.start()}))),g.disabled=!0,y.stop(),1==h&&(console.log(`Command: ${o}`),o.toLowerCase().includes("create"))?(console.log("Create New Record..."),l=a(Object.keys(l)),h=2,y.stop(),w=!0,void f("You selected create. Now fill in each key value.",(()=>{w=!1,y.start()}))):2==h?(console.log(`Fill each field: ${o}`),S(o),void console.log(l)):void 0},y.onend=()=>{console.log("Speech recognition ended."),g.disabled=!0,!1===w&&y.start()},y.onerror=e=>{console.error("Speech recognition error:",e.error),g.disabled=!1},g.onclick=()=>{f("Welcome, say Alexa to start.",(()=>{})),y.start()}}else alert("Sorry, your browser does not support the Web Speech API.")})();